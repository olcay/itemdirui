(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{bzNi:function(e,t,i){"use strict";i.r(t),i.d(t,"ItemModule",(function(){return J}));var n=i("3Pt+"),s=i("ofXK"),c=i("tyNb"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r.Ib(0,"router-outlet")},directives:[c.g],encapsulation:2}),e})();var a=i("J9tS"),b=i("/xYi");function l(e,t){1&e&&(r.Kb(0,"span"),r.fc(1,"..."),r.Jb())}let u=(()=>{class e{constructor(e,t,i,n,s){this.accountService=e,this.client=t,this.activatedRoute=i,this.alertService=n,this.router=s,this.account=this.accountService.accountValue,this.itemid=this.activatedRoute.snapshot.params.itemid,this.deleting=!1,this.data=[],this.tags=[]}getData(){this.client.getItem(this.itemid,void 0,"application/json").subscribe(e=>{this.data=e},e=>console.error(e)),this.client.getTagsForItem(this.itemid).subscribe(e=>{e.forEach(e=>{this.tags.push(e.name)})},e=>console.error(e))}onDelete(){confirm("Are you sure to delete this item?")&&(this.deleting=!0,this.client.deleteItem(this.itemid).subscribe(()=>{this.alertService.success("Item deleted successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/"])}))}ngOnInit(){this.getData()}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.b),r.Hb(c.a),r.Hb(a.b),r.Hb(c.c))},e.\u0275cmp=r.Bb({type:e,selectors:[["ng-component"]],decls:16,vars:9,consts:[["type","button",3,"disabled","click"],[4,"ngIf"]],template:function(e,t){1&e&&(r.Kb(0,"section"),r.Kb(1,"header"),r.Kb(2,"h2"),r.fc(3),r.Jb(),r.Kb(4,"p"),r.fc(5),r.Jb(),r.Kb(6,"p"),r.fc(7),r.Tb(8,"date"),r.Jb(),r.Kb(9,"p"),r.fc(10),r.Jb(),r.Jb(),r.Kb(11,"p"),r.fc(12),r.Jb(),r.Kb(13,"button",0),r.Qb("click",(function(){return t.onDelete()})),r.fc(14," Delete"),r.ec(15,l,2,0,"span",1),r.Jb(),r.Jb()),2&e&&(r.xb(3),r.gc(t.data.title),r.xb(2),r.gc(t.data.itemType),r.xb(2),r.gc(r.Ub(8,7,t.data.creationDate)),r.xb(3),r.gc(t.data.description),r.xb(2),r.gc(t.tags.toString()),r.xb(1),r.Vb("disabled",t.deleting),r.xb(2),r.Vb("ngIf",t.deleting))},directives:[s.k],pipes:[s.d],encapsulation:2}),e})();function f(e,t){1&e&&(r.Kb(0,"div"),r.fc(1,"Title is required"),r.Jb())}function d(e,t){if(1&e&&(r.Kb(0,"div"),r.ec(1,f,2,0,"div",2),r.Jb()),2&e){const e=r.Sb();r.xb(1),r.Vb("ngIf",e.f.title.errors.required)}}function h(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div"),r.Kb(1,"input",12),r.Qb("change",(function(i){r.ac(e);const n=t.$implicit;return r.Sb().onChange(n.value,i.target.checked)})),r.Jb(),r.fc(2),r.Jb()}if(2&e){const e=t.$implicit;r.xb(2),r.hc(" ",e.name," ")}}function m(e,t){1&e&&(r.Kb(0,"span"),r.fc(1,"..."),r.Jb())}const p=function(e){return{"is-invalid":e}},g=[{path:"",component:o,children:[{path:"create",component:(()=>{class e{constructor(e,t,i,n,s){this.formBuilder=e,this.router=t,this.accountService=i,this.alertService=n,this.client=s,this.account=this.accountService.accountValue,this.loading=!1,this.submitted=!1,this.tagsData=[{value:"isPlayed",name:"Is Played?"},{value:"isFinished",name:"Is Finished?"}]}onChange(e,t){const i=this.form.controls.tags;if(t)i.push(new n.d(e));else{const t=i.controls.findIndex(t=>t.value===e);i.removeAt(t)}}ngOnInit(){this.form=this.formBuilder.group({title:["",n.l.required],description:[""],itemType:["Game",n.l.required],tags:this.formBuilder.array([])})}get f(){return this.form.controls}onSubmit(){if(this.submitted=!0,this.alertService.clear(),!this.form.invalid){this.loading=!0;var e=new b.c;e.title=this.f.title.value,e.description=this.f.description.value,e.itemType=this.f.itemType.value,e.tags=new Array,this.f.tags.value.forEach(t=>{var i=new b.d;i.name=t,e.tags.push(i)}),this.client.createItem(e).subscribe(e=>{this.alertService.success("New item is created!",{keepAfterRouteChange:!0}),this.router.navigate(["/"])},e=>{this.alertService.error(e),this.loading=!1})}}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(n.c),r.Hb(c.c),r.Hb(a.a),r.Hb(a.b),r.Hb(b.b))},e.\u0275cmp=r.Bb({type:e,selectors:[["ng-component"]],decls:29,vars:14,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","title","size","20",3,"ngClass"],[4,"ngIf"],["formControlName","itemType",3,"ngClass"],["value","Game"],["value","Generic"],["value","Movie"],["value","Book"],[4,"ngFor","ngForOf"],["cols","40","rows","5","formControlName","description",3,"ngClass"],["type","submit",3,"disabled"],["routerLink","/","href",""],["type","checkbox",3,"change"]],template:function(e,t){1&e&&(r.Kb(0,"section"),r.Kb(1,"form",0),r.Qb("ngSubmit",(function(){return t.onSubmit()})),r.Kb(2,"header"),r.Kb(3,"h2"),r.fc(4,"Add a new item"),r.Jb(),r.Jb(),r.Kb(5,"label"),r.fc(6,"Title:"),r.Jb(),r.Ib(7,"input",1),r.ec(8,d,2,1,"div",2),r.Kb(9,"label"),r.fc(10,"Item type:"),r.Jb(),r.Kb(11,"select",3),r.Kb(12,"option",4),r.fc(13,"Game"),r.Jb(),r.Kb(14,"option",5),r.fc(15,"Generic"),r.Jb(),r.Kb(16,"option",6),r.fc(17,"Movie"),r.Jb(),r.Kb(18,"option",7),r.fc(19,"Book"),r.Jb(),r.Jb(),r.ec(20,h,3,1,"div",8),r.Kb(21,"label"),r.fc(22,"Description:"),r.Jb(),r.Ib(23,"textarea",9),r.Kb(24,"button",10),r.fc(25," Save"),r.ec(26,m,2,0,"span",2),r.Jb(),r.Kb(27,"a",11),r.fc(28,"Cancel"),r.Jb(),r.Jb(),r.Jb()),2&e&&(r.xb(1),r.Vb("formGroup",t.form),r.xb(6),r.Vb("ngClass",r.Yb(8,p,t.submitted&&t.f.title.errors)),r.xb(1),r.Vb("ngIf",t.submitted&&t.f.title.errors),r.xb(3),r.Vb("ngClass",r.Yb(10,p,t.submitted&&t.f.itemType.errors)),r.xb(9),r.Vb("ngForOf",t.tagsData),r.xb(3),r.Vb("ngClass",r.Yb(12,p,t.submitted&&t.f.description.errors)),r.xb(1),r.Vb("disabled",t.loading),r.xb(2),r.Vb("ngIf",t.loading))},directives:[n.n,n.h,n.f,n.b,n.g,n.e,s.i,s.k,n.k,n.i,n.m,s.j,c.e],encapsulation:2}),e})()},{path:":itemid",component:u}]}];let v=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(g)],c.f]}),e})(),J=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[s.b,n.j,v]]}),e})()}}]);